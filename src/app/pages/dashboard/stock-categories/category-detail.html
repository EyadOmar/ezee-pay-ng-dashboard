<div *transloco="let t" class="flex flex-col gap-6">
  <!-- Breadcrumb -->
  <p-breadcrumb [model]="breadcrumbItems()" [home]="homeItem()" styleClass="text-sm border-0 bg-transparent p-0" />

  <!-- Page Header -->
  <div class="flex items-center justify-between">
    <div class="flex items-center gap-3">
      <h2 class="text-xl font-semibold text-surface-900 dark:text-surface-900 m-0">
        {{ t('categories.detailTitle') }}
      </h2>
    </div>
    <p-button
      [label]="t('categories.actions.edit')"
      icon="pi pi-pencil"
      severity="secondary"
      [outlined]="true"
      (onClick)="onEdit()"
    />
  </div>

  @if (category(); as cat) {
    <div class="flex flex-col gap-5">
      <!-- Names -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
            {{ t('categories.form.nameEn') }}
          </span>
          <span class="text-surface-900 dark:text-surface-900 font-medium">{{ cat.nameEn }}</span>
        </div>
        <div>
          <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
            {{ t('categories.form.nameAr') }}
          </span>
          <span class="text-surface-900 dark:text-surface-900 font-medium" dir="rtl">{{ cat.nameAr }}</span>
        </div>
      </div>

      <!-- Descriptions -->
      @if (cat.descEn || cat.descAr) {
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          @if (cat.descEn) {
            <div>
              <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
                {{ t('categories.form.descEn') }}
              </span>
              <span class="text-surface-700 dark:text-surface-700">{{ cat.descEn }}</span>
            </div>
          }
          @if (cat.descAr) {
            <div>
              <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
                {{ t('categories.form.descAr') }}
              </span>
              <span class="text-surface-700 dark:text-surface-700" dir="rtl">{{ cat.descAr }}</span>
            </div>
          }
        </div>
      }

      <!-- Parent -->
      <div>
        <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
          {{ t('categories.form.parent') }}
        </span>
        @if (parentCategory(); as parent) {
          <p-chip [label]="isAr() ? parent.nameAr : parent.nameEn" />
        } @else {
          <span class="text-surface-400">{{ t('categories.noParent') }}</span>
        }
      </div>

      <!-- Pricing & Strategy -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
            {{ t('categories.form.pricingMethod') }}
          </span>
          <p-tag [value]="getPricingLabel(cat.pricingMethod)" severity="info" />
          @if (cat.parentId) {
            <span class="text-primary text-xs ms-2">{{ t('categories.inherited') }}</span>
          }
        </div>
        <div>
          <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
            {{ t('categories.form.salesStrategy') }}
          </span>
          <p-tag [value]="getSalesLabel(cat.salesStrategy)" severity="info" />
          @if (cat.parentId) {
            <span class="text-primary text-xs ms-2">{{ t('categories.inherited') }}</span>
          }
        </div>
      </div>

      <!-- Status -->
      <div>
        <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
          {{ t('categories.table.status') }}
        </span>
        @if (cat.inactive) {
          <p-tag [value]="t('categories.inactive')" severity="danger" />
        } @else {
          <p-tag [value]="t('categories.active')" severity="success" />
        }
      </div>

      <!-- Images -->
      @if (cat.images.length > 0) {
        <div>
          <span class="text-surface-500 dark:text-surface-600 text-sm block mb-2">
            {{ t('categories.form.images') }}
          </span>
          <div class="flex gap-3 flex-wrap">
            @for (img of cat.images; track img.id) {
              <div class="relative">
                <img
                  [src]="img.url"
                  [alt]="cat.nameEn"
                  class="w-20 h-20 object-cover rounded-lg border border-surface-200 dark:border-surface-200"
                />
                <span
                  class="absolute -top-2 -end-2 bg-primary text-white text-xs px-1.5 py-0.5 rounded-full"
                >
                  {{ img.destination }}
                </span>
              </div>
            }
          </div>
        </div>
      }

      <!-- Timestamps -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-surface-200 dark:border-surface-200">
        <div>
          <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
            {{ t('categories.createdAt') }}
          </span>
          <span class="text-surface-700 dark:text-surface-700 text-sm">
            {{ cat.createdAt | date: 'mediumDate' }}
          </span>
        </div>
        <div>
          <span class="text-surface-500 dark:text-surface-600 text-sm block mb-1">
            {{ t('categories.updatedAt') }}
          </span>
          <span class="text-surface-700 dark:text-surface-700 text-sm">
            {{ cat.updatedAt | date: 'mediumDate' }}
          </span>
        </div>
      </div>

      <!-- Delete -->
      <div class="flex justify-end pt-4 border-t border-surface-200 dark:border-surface-200">
        <p-button
          [label]="t('categories.actions.delete')"
          icon="pi pi-trash"
          severity="danger"
          [outlined]="true"
          (onClick)="onDelete($event)"
        />
      </div>
    </div>
  }

  <p-confirmdialog />
</div>
