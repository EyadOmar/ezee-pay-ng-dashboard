<aside
  *transloco="let t"
  role="navigation"
  [attr.aria-label]="t('nav.mainNavigation')"
  [attr.aria-expanded]="!layout.sidebarCollapsed()"
  class="h-full flex flex-col overflow-hidden"
>
  <!-- Logo / Brand -->
  <div class="shrink-0 flex items-center h-16"
       [class.px-5]="!layout.sidebarCollapsed()"
       [class.justify-center]="layout.sidebarCollapsed()">
    @if (!layout.sidebarCollapsed()) {
      <div class="flex items-center gap-2">
        <img src="assets/images/logos/full-rounded-icon-like.png"
             alt="EzeePay Logo"
             class="size-9 rounded-lg object-contain" />
        <span class="text-xl font-bold text-primary italic whitespace-nowrap">{{ t('app.name') }}</span>
      </div>
    } @else {
      <img src="assets/images/logos/full-rounded-icon-like.png"
           alt="EzeePay Logo"
           class="size-8 rounded-lg object-contain" />
    }
  </div>

  <!-- Navigation Items -->
  <nav class="flex-1 overflow-y-auto overflow-x-hidden sidebar-scroll px-2 py-3 flex flex-col gap-0.5">
    @for (item of menuItems; track item.route) {
      <a
        [routerLink]="item.route"
        routerLinkActive="!bg-surface-0 dark:!bg-white/10 !text-surface-900 dark:!text-surface-900 font-semibold shadow-[0_2px_8px_rgba(0,0,0,0.08)] dark:shadow-[0_2px_12px_rgba(0,0,0,0.4)]"
        [routerLinkActiveOptions]="{ exact: item.exact }"
        [pTooltip]="layout.sidebarCollapsed() ? t(item.labelKey) : ''"
        tooltipPosition="right"
        class="flex items-center gap-3 px-3 py-2.5 rounded-lg min-h-11
               text-surface-500 dark:text-surface-600
               hover:text-surface-900 dark:hover:text-surface-800
               hover:bg-surface-0/50 dark:hover:bg-surface-100/40
               transition-all duration-300 no-underline"
        [class.justify-center]="layout.sidebarCollapsed()"
        [attr.aria-label]="layout.sidebarCollapsed() ? t(item.labelKey) : null"
      >
        <i [class]="item.icon + ' text-xl shrink-0 w-5 text-center'"></i>
        @if (!layout.sidebarCollapsed()) {
          <span class="whitespace-nowrap overflow-hidden text-sm">{{ t(item.labelKey) }}</span>
        }
      </a>
    }
  </nav>

  <!-- Footer: Settings + Logout -->
  <div class="shrink-0 px-2 py-3 border-t border-surface-200 dark:border-surface-200 flex flex-col gap-0.5">
    <!-- Settings -->
    <a
      routerLink="/settings"
      routerLinkActive="!bg-surface-0 dark:!bg-white/10 !text-surface-900 dark:!text-surface-900 font-semibold shadow-[0_2px_8px_rgba(0,0,0,0.08)] dark:shadow-[0_2px_12px_rgba(0,0,0,0.4)]"
      [routerLinkActiveOptions]="{ exact: false }"
      [pTooltip]="layout.sidebarCollapsed() ? t('nav.settings') : ''"
      tooltipPosition="right"
      class="flex items-center gap-3 px-3 py-2.5 rounded-lg min-h-11
             text-surface-500 dark:text-surface-600
             hover:text-surface-900 dark:hover:text-surface-800
             hover:bg-surface-0/50 dark:hover:bg-surface-100/40
             transition-all duration-300 no-underline"
      [class.justify-center]="layout.sidebarCollapsed()"
      [attr.aria-label]="layout.sidebarCollapsed() ? t('nav.settings') : null"
    >
      <i class="pi pi-cog text-xl shrink-0 w-5 text-center"></i>
      @if (!layout.sidebarCollapsed()) {
        <span class="whitespace-nowrap overflow-hidden text-sm">{{ t('nav.settings') }}</span>
      }
    </a>

    <!-- Logout -->
    <button
      type="button"
      (click)="onLogout()"
      [pTooltip]="layout.sidebarCollapsed() ? t('nav.logout') : ''"
      tooltipPosition="right"
      class="flex items-center gap-3 px-3 py-2.5 rounded-lg min-h-11 w-full
             text-surface-500 dark:text-surface-600
             hover:text-red-600 dark:hover:text-red-400
             hover:bg-red-50 dark:hover:bg-red-500/10
             transition-all duration-300 cursor-pointer
             border-0 bg-transparent"
      [class.justify-center]="layout.sidebarCollapsed()"
      [attr.aria-label]="layout.sidebarCollapsed() ? t('nav.logout') : null"
    >
      <i class="pi pi-sign-out text-xl shrink-0 w-5 text-center"></i>
      @if (!layout.sidebarCollapsed()) {
        <span class="whitespace-nowrap overflow-hidden text-sm">{{ t('nav.logout') }}</span>
      }
    </button>
  </div>
</aside>
