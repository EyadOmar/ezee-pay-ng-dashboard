<!-- Outer frame -->
<div class="h-screen p-3 bg-surface-100 dark:bg-surface-0"
     [class.p-0]="layout.isMobile()">
  <div class="h-full flex rounded-2xl border border-surface-200 dark:border-surface-200 bg-surface-50 dark:bg-surface-50 overflow-hidden"
       [class.rounded-none]="layout.isMobile()"
       [class.border-0]="layout.isMobile()">

    <!-- Sidebar wrapper (desktop + tablet) -->
    @if (layout.showSidebar()) {
      <div class="shrink-0 overflow-hidden transition-[width] duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]"
           [style.width]="layout.sidebarWidth()">
        <app-sidebar />
      </div>
    }

    <!-- Right area: header + content card -->
    <div class="flex-1 flex flex-col min-w-0 pe-3 pb-3"
         [class.pe-0]="layout.isMobile()"
         [class.pb-0]="layout.isMobile()">

      <!-- Header (transparent, aligns with sidebar brand) -->
      <app-header />

      <!-- Main content card (the white contrasting area) -->
      <main role="main"
            class="flex-1 bg-surface-0 dark:bg-surface-100 rounded-2xl p-6 overflow-auto"
            [class.rounded-none]="layout.isMobile()"
            [class.pb-20]="layout.showBottomNav()">
        <router-outlet />
      </main>
    </div>
  </div>
</div>

<!-- Bottom nav (mobile) -->
@if (layout.showBottomNav()) {
  <app-bottom-nav />
}
